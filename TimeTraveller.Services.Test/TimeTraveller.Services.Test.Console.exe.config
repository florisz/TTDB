<?xml version="1.0" encoding="utf-8" ?>
<configuration>
  <configSections>
    <section name="unity" type="Microsoft.Practices.Unity.Configuration.UnityConfigurationSection, Microsoft.Practices.Unity.Configuration" />
  </configSections>

  <connectionStrings>
    <add name="ItsDb" connectionString="metadata=res://*/Impl.ItsModel.csdl|res://*/Impl.ItsModel.ssdl|res://*/Impl.ItsModel.msl;provider=System.Data.SqlClient;provider connection string=&quot;Data Source=.;Initial Catalog=ITSData;Integrated Security=True;MultipleActiveResultSets=False&quot;" providerName="System.Data.EntityClient" />
  </connectionStrings>

  <unity>
    <typeAliases>
      <!-- Lifetime manager types -->
      <typeAlias alias="singleton"
           type="Microsoft.Practices.Unity.ContainerControlledLifetimeManager,
               Microsoft.Practices.Unity" />
      <typeAlias alias="perThread"
           type="Microsoft.Practices.Unity.PerThreadLifetimeManager,
               Microsoft.Practices.Unity" />
    </typeAliases>

    <containers>
      <container>
        <types>
          <!-- Services for the REST-call -->
          <type type="TimeTraveller.Services.CaseFiles.ICaseFileService, TimeTraveller.Services.CaseFiles" 
                mapTo="TimeTraveller.Services.CaseFiles.Impl.CaseFileService, TimeTraveller.Services.CaseFiles">
          </type>
          <type type="TimeTraveller.Services.CaseFileSpecifications.ICaseFileSpecificationService, TimeTraveller.Services.CaseFileSpecifications"
                mapTo="TimeTraveller.Services.CaseFileSpecifications.Impl.CaseFileSpecificationService, TimeTraveller.Services.CaseFileSpecifications">
          </type>
          <type type="TimeTraveller.Services.Data.IDataService, TimeTraveller.Services.Data"
                mapTo="TimeTraveller.Services.Data.Impl.DataService, TimeTraveller.Services.Data">
          </type>
          <type type="TimeTraveller.Services.ObjectModels.IObjectModelService, TimeTraveller.Services.ObjectModels"
                mapTo="TimeTraveller.Services.ObjectModels.Impl.ObjectModelService, TimeTraveller.Services.ObjectModels">
          </type>
          <type type="TimeTraveller.Services.Repository.IRepositoryService, TimeTraveller.Services.Repository"
                mapTo="TimeTraveller.Services.Repository.Impl.RepositoryService, TimeTraveller.Services.Repository">
          </type>
          <type type="TimeTraveller.Services.Representations.IRepresentationService, TimeTraveller.Services.Representations"
                mapTo="TimeTraveller.Services.Representations.Impl.RepresentationService, TimeTraveller.Services.Representations">
          </type>
          <type type="TimeTraveller.Services.Resources.IResourceService, TimeTraveller.Services.Resources"
                mapTo="TimeTraveller.Services.Resources.Impl.ResourceService, TimeTraveller.Services.Resources.Impl">
          </type>
          <type type="TimeTraveller.Services.Rest.IRestService, TimeTraveller.Services.Rest"
                mapTo="TimeTraveller.Services.Rest.Impl.RestService, TimeTraveller.Services.Rest">
          </type>
          <type type="TimeTraveller.Services.Rules.IRuleService, TimeTraveller.Services.Rules"
                mapTo="TimeTraveller.Services.Rules.Impl.RuleService, TimeTraveller.Services.Rules">
          </type>

          <type type="TimeTraveller.Services.Representations.IRepresentationTransformer, TimeTraveller.Services.Representations"
                mapTo="TimeTraveller.Services.Representations.Impl.XsltTransformer, TimeTraveller.Services.Representations"
                name="xslt">
          </type>
          <type type="TimeTraveller.Services.Rules.IRuleEngine, TimeTraveller.Services.Rules"
                mapTo="TimeTraveller.Services.Rules.FSharp.FSharpRuleEngine, TimeTraveller.Services.Rules.FSharp"
                name="fsharp">
          </type>

          <!-- General Formatters -->
          <type type="TimeTraveller.Services.Rest.Impl.IFormatter, TimeTraveller.Services.Rest"
                mapTo="TimeTraveller.Services.Rest.Impl.Formatters.HtmlFormatter, TimeTraveller.Services.Rest"
                name="HistoryHtmlFormatter">
            <typeConfig>
              <constructor>
                <param name="container" parameterType="TimeTraveller.General.Unity.IUnity, TimeTraveller.General.Unity">
                  <dependency/>
                </param>
                <param name="xsltResourceName" parameterType="System.String">
                  <value value="scripts/itsbrowserhistory.xslt"/>
                </param>
                <param name="chain" parameterType="TimeTraveller.Services.Rest.Impl.IFormatter, TimeTraveller.Services.Rest">
                  <dependency name="TextFormatter"/>
                </param>
              </constructor>
            </typeConfig>
          </type>
          <type type="TimeTraveller.Services.Rest.Impl.IFormatter, TimeTraveller.Services.Rest"
                mapTo="TimeTraveller.Services.Rest.Impl.Formatters.HtmlFormatter, TimeTraveller.Services.Rest"
                name="ListHtmlFormatter">
            <typeConfig>
              <constructor>
                <param name="container" parameterType="TimeTraveller.General.Unity.IUnity, TimeTraveller.General.Unity">
                  <dependency/>
                </param>
                <param name="xsltResourceName" parameterType="System.String">
                  <value value="scripts/itsbrowserlist.xslt"/>
                </param>
                <param name="chain" parameterType="TimeTraveller.Services.Rest.Impl.IFormatter, TimeTraveller.Services.Rest">
                  <dependency name="TextFormatter"/>
                </param>
              </constructor>
            </typeConfig>
          </type>
          <type type="TimeTraveller.Services.Rest.Impl.IFormatter, TimeTraveller.Services.Rest"
                mapTo="TimeTraveller.Services.Rest.Impl.Formatters.HtmlFormatter, TimeTraveller.Services.Rest"
                name="SummaryHtmlFormatter">
            <typeConfig>
              <constructor>
                <param name="container" parameterType="TimeTraveller.General.Unity.IUnity, TimeTraveller.General.Unity">
                  <dependency/>
                </param>
                <param name="xsltResourceName" parameterType="System.String">
                  <value value="scripts/itsbrowsersummary.xslt"/>
                </param>
                <param name="chain" parameterType="TimeTraveller.Services.Rest.Impl.IFormatter, TimeTraveller.Services.Rest">
                  <dependency name="TextFormatter"/>
                </param>
              </constructor>
            </typeConfig>
          </type>
          <type type="TimeTraveller.Services.Rest.Impl.IFormatter, TimeTraveller.Services.Rest"
                mapTo="TimeTraveller.Services.Rest.Impl.Formatters.TextFormatter, TimeTraveller.Services.Rest"
                name="TextFormatter"/>
          <type type="TimeTraveller.Services.Rest.Impl.IFormatter, TimeTraveller.Services.Rest"
                mapTo="TimeTraveller.Services.Rest.Impl.Formatters.XmlFormatter, TimeTraveller.Services.Rest"
                name="XmlFormatter"/>

          <!-- CaseFile Commands and Formatters -->
          <type type="TimeTraveller.Services.Rest.Impl.ICommand, TimeTraveller.Services.Rest"
                mapTo="TimeTraveller.Services.Rest.Impl.Commands.CaseFiles.GetCaseFileByTimePointCommand, TimeTraveller.Services.Rest"
                name="GETCaseFileTimePointCommand"/>
          <type type="TimeTraveller.Services.Rest.Impl.ICommand, TimeTraveller.Services.Rest"
                mapTo="TimeTraveller.Services.Rest.Impl.Commands.CaseFiles.GetCaseFileByVersionCommand, TimeTraveller.Services.Rest"
                name="GETCaseFileVersionCommand"/>
          <type type="TimeTraveller.Services.Rest.Impl.ICommand, TimeTraveller.Services.Rest"
                mapTo="TimeTraveller.Services.Rest.Impl.Commands.CaseFiles.GetLatestCaseFileCommand, TimeTraveller.Services.Rest"
                name="GETCaseFileCommand"/>
          <type type="TimeTraveller.Services.Rest.Impl.ICommand, TimeTraveller.Services.Rest"
                mapTo="TimeTraveller.Services.Rest.Impl.Commands.CaseFiles.GetCaseFilesCommand, TimeTraveller.Services.Rest"
                name="GETCaseFilesCommand"/>
          <type type="TimeTraveller.Services.Rest.Impl.ICommand, TimeTraveller.Services.Rest"
                mapTo="TimeTraveller.Services.Rest.Impl.Commands.CaseFiles.StoreCaseFileCommand, TimeTraveller.Services.Rest"
                name="PUTCaseFileCommand"/>

          <type type="TimeTraveller.Services.Rest.Impl.IFormatter, TimeTraveller.Services.Rest"
                mapTo="TimeTraveller.Services.Rest.Impl.Formatters.CaseFiles.CaseFileHistoryFormatter, TimeTraveller.Services.Rest"
                name="CaseFileHistoryHtmlFormatter">
              <typeConfig>
                <constructor>
                  <param name="caseFileService" parameterType="TimeTraveller.Services.CaseFiles.ICaseFileService, TimeTraveller.Services.CaseFiles">
                    <dependency />
                  </param>
                  <param name="chain" parameterType="TimeTraveller.Services.Rest.Impl.IFormatter, TimeTraveller.Services.Rest">
                    <dependency name="HistoryHtmlFormatter"/>
                  </param>
                </constructor>
              </typeConfig>
          </type>
          <type type="TimeTraveller.Services.Rest.Impl.IFormatter, TimeTraveller.Services.Rest"
                mapTo="TimeTraveller.Services.Rest.Impl.Formatters.CaseFiles.CaseFileHistoryFormatter, TimeTraveller.Services.Rest"
                name="CaseFileHistoryXmlFormatter">
              <typeConfig>
                <constructor>
                  <param name="caseFileService" parameterType="TimeTraveller.Services.CaseFiles.ICaseFileService, TimeTraveller.Services.CaseFiles">
                    <dependency />
                  </param>
                  <param name="chain" parameterType="TimeTraveller.Services.Rest.Impl.IFormatter, TimeTraveller.Services.Rest">
                    <dependency name="XmlFormatter"/>
                  </param>
                </constructor>
              </typeConfig>
          </type>
          <type type="TimeTraveller.Services.Rest.Impl.IFormatter, TimeTraveller.Services.Rest"
                mapTo="TimeTraveller.Services.Rest.Impl.Formatters.CaseFiles.CaseFileListFormatter, TimeTraveller.Services.Rest"
                name="CaseFilesHtmlFormatter">
            <typeConfig>
              <constructor>
                <param name="caseFileService" parameterType="TimeTraveller.Services.CaseFiles.ICaseFileService, TimeTraveller.Services.CaseFiles">
                  <dependency />
                </param>
                <param name="chain" parameterType="TimeTraveller.Services.Rest.Impl.IFormatter, TimeTraveller.Services.Rest">
                  <dependency name="ListHtmlFormatter"/>
                </param>
              </constructor>
            </typeConfig>
          </type>
          <type type="TimeTraveller.Services.Rest.Impl.IFormatter, TimeTraveller.Services.Rest"
                mapTo="TimeTraveller.Services.Rest.Impl.Formatters.CaseFiles.CaseFileListFormatter, TimeTraveller.Services.Rest"
                name="CaseFilesXmlFormatter">
            <typeConfig>
              <constructor>
                <param name="caseFileService" parameterType="TimeTraveller.Services.CaseFiles.ICaseFileService, TimeTraveller.Services.CaseFiles">
                  <dependency />
                </param>
                <param name="chain" parameterType="TimeTraveller.Services.Rest.Impl.IFormatter, TimeTraveller.Services.Rest">
                  <dependency name="XmlFormatter"/>
                </param>
              </constructor>
            </typeConfig>
          </type>
          <type type="TimeTraveller.Services.Rest.Impl.IFormatter, TimeTraveller.Services.Rest"
                mapTo="TimeTraveller.Services.Rest.Impl.Formatters.CaseFiles.CaseFileSummaryFormatter, TimeTraveller.Services.Rest"
                name="CaseFileSummaryHtmlFormatter">
            <typeConfig>
              <constructor>
                <param name="caseFileService" parameterType="TimeTraveller.Services.CaseFiles.ICaseFileService, TimeTraveller.Services.CaseFiles">
                  <dependency />
                </param>
                <param name="chain" parameterType="TimeTraveller.Services.Rest.Impl.IFormatter, TimeTraveller.Services.Rest">
                  <dependency name="SummaryHtmlFormatter"/>
                </param>
              </constructor>
            </typeConfig>
          </type>
          <type type="TimeTraveller.Services.Rest.Impl.IFormatter, TimeTraveller.Services.Rest"
                mapTo="TimeTraveller.Services.Rest.Impl.Formatters.CaseFiles.CaseFileSummaryFormatter, TimeTraveller.Services.Rest"
                name="CaseFileSummaryXmlFormatter">
            <typeConfig>
              <constructor>
                <param name="caseFileService" parameterType="TimeTraveller.Services.CaseFiles.ICaseFileService, TimeTraveller.Services.CaseFiles">
                  <dependency />
                </param>
                <param name="chain" parameterType="TimeTraveller.Services.Rest.Impl.IFormatter, TimeTraveller.Services.Rest">
                  <dependency name="XmlFormatter"/>
                </param>
              </constructor>
            </typeConfig>
          </type>
          <type type="TimeTraveller.Services.Rest.Impl.IFormatter, TimeTraveller.Services.Rest"
                mapTo="TimeTraveller.Services.Rest.Impl.Formatters.CaseFiles.CaseFileByRepresentationFormatter, TimeTraveller.Services.Rest"
                name="CaseFileRepresentationFormatter"/>
          <type type="TimeTraveller.Services.Rest.Impl.IFormatter, TimeTraveller.Services.Rest"
                mapTo="TimeTraveller.Services.Rest.Impl.Formatters.CaseFiles.CaseFileXmlFormatter, TimeTraveller.Services.Rest"
                name="CaseFileFormatter">
            <typeConfig>
              <constructor>
                <param name="caseFileService" parameterType="TimeTraveller.Services.CaseFiles.ICaseFileService, TimeTraveller.Services.CaseFiles">
                  <dependency />
                </param>
                <param name="chain" parameterType="TimeTraveller.Services.Rest.Impl.IFormatter, TimeTraveller.Services.Rest">
                  <dependency name="XmlFormatter"/>
                </param>
              </constructor>
            </typeConfig>
          </type>
          <type type="TimeTraveller.Services.Rest.Impl.IFormatter, TimeTraveller.Services.Rest"
                mapTo="TimeTraveller.Services.Rest.Impl.Formatters.CaseFiles.CaseFileEditFormatter, TimeTraveller.Services.Rest"
                name="CaseFileEditXmlFormatter">
            <typeConfig>
              <constructor>
                <param name="caseFileService" parameterType="TimeTraveller.Services.CaseFiles.ICaseFileService, TimeTraveller.Services.CaseFiles">
                  <dependency />
                </param>
                <param name="chain" parameterType="TimeTraveller.Services.Rest.Impl.IFormatter, TimeTraveller.Services.Rest">
                  <dependency name="XmlFormatter"/>
                </param>
              </constructor>
            </typeConfig>
          </type>
          <type type="TimeTraveller.Services.Rest.Impl.IFormatter, TimeTraveller.Services.Rest"
                mapTo="TimeTraveller.Services.Rest.Impl.Formatters.CaseFiles.CaseFileEditFormatter, TimeTraveller.Services.Rest"
                name="CaseFileEditHtmlFormatter">
            <typeConfig>
              <constructor>
                <param name="caseFileService" parameterType="TimeTraveller.Services.CaseFiles.ICaseFileService, TimeTraveller.Services.CaseFiles">
                  <dependency />
                </param>
                <param name="chain" parameterType="TimeTraveller.Services.Rest.Impl.IFormatter, TimeTraveller.Services.Rest">
                  <dependency name="XmlFormatter"/>
                </param>
              </constructor>
            </typeConfig>
          </type>
          <!-- CaseFileSpecification Commands and Formatters -->
          <type type="TimeTraveller.Services.Rest.Impl.ICommand, TimeTraveller.Services.Rest"
                mapTo="TimeTraveller.Services.Rest.Impl.Commands.CaseFileSpecifications.GetCaseFileSpecificationByTimePointCommand, TimeTraveller.Services.Rest"
                name="GETCaseFileSpecificationTimePointCommand"/>
          <type type="TimeTraveller.Services.Rest.Impl.ICommand, TimeTraveller.Services.Rest"
                mapTo="TimeTraveller.Services.Rest.Impl.Commands.CaseFileSpecifications.GetCaseFileSpecificationByVersionCommand, TimeTraveller.Services.Rest"
                name="GETCaseFileSpecificationVersionCommand"/>
          <type type="TimeTraveller.Services.Rest.Impl.ICommand, TimeTraveller.Services.Rest"
                mapTo="TimeTraveller.Services.Rest.Impl.Commands.CaseFileSpecifications.GetLatestCaseFileSpecificationCommand, TimeTraveller.Services.Rest"
                name="GETCaseFileSpecificationCommand"/>
          <type type="TimeTraveller.Services.Rest.Impl.ICommand, TimeTraveller.Services.Rest"
                mapTo="TimeTraveller.Services.Rest.Impl.Commands.CaseFileSpecifications.GetCaseFileSpecificationsCommand, TimeTraveller.Services.Rest"
                name="GETCaseFileSpecificationsCommand"/>
          <type type="TimeTraveller.Services.Rest.Impl.ICommand, TimeTraveller.Services.Rest"
                mapTo="TimeTraveller.Services.Rest.Impl.Commands.CaseFileSpecifications.StoreCaseFileSpecificationCommand, TimeTraveller.Services.Rest"
                name="PUTCaseFileSpecificationCommand"/>
          <type type="TimeTraveller.Services.Rest.Impl.IFormatter, TimeTraveller.Services.Rest"
                mapTo="TimeTraveller.Services.Rest.Impl.Formatters.CaseFileSpecifications.CaseFileSpecificationAssemblyFormatter, TimeTraveller.Services.Rest"
                name="CaseFileSpecification.dllFormatter"/>
          <type type="TimeTraveller.Services.Rest.Impl.IFormatter, TimeTraveller.Services.Rest"
                mapTo="TimeTraveller.Services.Rest.Impl.Formatters.CaseFileSpecifications.CaseFileSpecificationHistoryFormatter, TimeTraveller.Services.Rest"
                name="CaseFileSpecificationHistoryHtmlFormatter">
            <typeConfig>
              <constructor>
                <param name="caseFileSpecificationService" parameterType="TimeTraveller.Services.CaseFileSpecifications.ICaseFileSpecificationService, TimeTraveller.Services.CaseFileSpecifications">
                  <dependency />
                </param>
                <param name="chain" parameterType="TimeTraveller.Services.Rest.Impl.IFormatter, TimeTraveller.Services.Rest">
                  <dependency name="HistoryHtmlFormatter"/>
                </param>
              </constructor>
            </typeConfig>
          </type>
          <type type="TimeTraveller.Services.Rest.Impl.IFormatter, TimeTraveller.Services.Rest"
                mapTo="TimeTraveller.Services.Rest.Impl.Formatters.CaseFileSpecifications.CaseFileSpecificationHistoryFormatter, TimeTraveller.Services.Rest"
                name="CaseFileSpecificationHistoryXmlFormatter">
            <typeConfig>
              <constructor>
                <param name="caseFileSpecificationService" parameterType="TimeTraveller.Services.CaseFileSpecifications.ICaseFileSpecificationService, TimeTraveller.Services.CaseFileSpecifications">
                  <dependency />
                </param>
                <param name="chain" parameterType="TimeTraveller.Services.Rest.Impl.IFormatter, TimeTraveller.Services.Rest">
                  <dependency name="XmlFormatter"/>
                </param>
              </constructor>
            </typeConfig>
          </type>
          <type type="TimeTraveller.Services.Rest.Impl.IFormatter, TimeTraveller.Services.Rest"
                mapTo="TimeTraveller.Services.Rest.Impl.Formatters.CaseFileSpecifications.CaseFileSpecificationListFormatter, TimeTraveller.Services.Rest"
                name="CaseFileSpecificationsHtmlFormatter">
            <typeConfig>
              <constructor>
                <param name="caseFileSpecificationService" parameterType="TimeTraveller.Services.CaseFileSpecifications.ICaseFileSpecificationService, TimeTraveller.Services.CaseFileSpecifications">
                  <dependency />
                </param>
                <param name="chain" parameterType="TimeTraveller.Services.Rest.Impl.IFormatter, TimeTraveller.Services.Rest">
                  <dependency name="ListHtmlFormatter"/>
                </param>
              </constructor>
            </typeConfig>
          </type>
          <type type="TimeTraveller.Services.Rest.Impl.IFormatter, TimeTraveller.Services.Rest"
                mapTo="TimeTraveller.Services.Rest.Impl.Formatters.CaseFileSpecifications.CaseFileSpecificationListFormatter, TimeTraveller.Services.Rest"
                name="CaseFileSpecificationsXmlFormatter">
            <typeConfig>
              <constructor>
                <param name="caseFileSpecificationService" parameterType="TimeTraveller.Services.CaseFileSpecifications.ICaseFileSpecificationService, TimeTraveller.Services.CaseFileSpecifications">
                  <dependency />
                </param>
                <param name="chain" parameterType="TimeTraveller.Services.Rest.Impl.IFormatter, TimeTraveller.Services.Rest">
                  <dependency name="XmlFormatter"/>
                </param>
              </constructor>
            </typeConfig>
          </type>
          <type type="TimeTraveller.Services.Rest.Impl.IFormatter, TimeTraveller.Services.Rest"
                mapTo="TimeTraveller.Services.Rest.Impl.Formatters.CaseFileSpecifications.CaseFileSpecificationSummaryFormatter, TimeTraveller.Services.Rest"
                name="CaseFileSpecificationSummaryHtmlFormatter">
            <typeConfig>
              <constructor>
                <param name="caseFileSpecificationService" parameterType="TimeTraveller.Services.CaseFileSpecifications.ICaseFileSpecificationService, TimeTraveller.Services.CaseFileSpecifications">
                  <dependency />
                </param>
                <param name="chain" parameterType="TimeTraveller.Services.Rest.Impl.IFormatter, TimeTraveller.Services.Rest">
                  <dependency name="SummaryHtmlFormatter"/>
                </param>
              </constructor>
            </typeConfig>
          </type>
          <type type="TimeTraveller.Services.Rest.Impl.IFormatter, TimeTraveller.Services.Rest"
                mapTo="TimeTraveller.Services.Rest.Impl.Formatters.CaseFileSpecifications.CaseFileSpecificationSummaryFormatter, TimeTraveller.Services.Rest"
                name="CaseFileSpecificationSummaryXmlFormatter">
            <typeConfig>
              <constructor>
                <param name="caseFileSpecificationService" parameterType="TimeTraveller.Services.CaseFileSpecifications.ICaseFileSpecificationService, TimeTraveller.Services.CaseFileSpecifications">
                  <dependency />
                </param>
                <param name="chain" parameterType="TimeTraveller.Services.Rest.Impl.IFormatter, TimeTraveller.Services.Rest">
                  <dependency name="XmlFormatter"/>
                </param>
              </constructor>
            </typeConfig>
          </type>
          <type type="TimeTraveller.Services.Rest.Impl.IFormatter, TimeTraveller.Services.Rest"
                mapTo="TimeTraveller.Services.Rest.Impl.Formatters.CaseFileSpecifications.CaseFileSpecificationXmlFormatter, TimeTraveller.Services.Rest"
                name="CaseFileSpecificationFormatter">
            <typeConfig>
              <constructor>
                <param name="caseFileSpecificationService" parameterType="TimeTraveller.Services.CaseFileSpecifications.ICaseFileSpecificationService, TimeTraveller.Services.CaseFileSpecifications">
                  <dependency />
                </param>
                <param name="chain" parameterType="TimeTraveller.Services.Rest.Impl.IFormatter, TimeTraveller.Services.Rest">
                  <dependency name="XmlFormatter"/>
                </param>
              </constructor>
            </typeConfig>
          </type>
          <type type="TimeTraveller.Services.Rest.Impl.IFormatter, TimeTraveller.Services.Rest"
                mapTo="TimeTraveller.Services.Rest.Impl.Formatters.CaseFileSpecifications.CaseFileSpecificationXmlSchemaFormatter, TimeTraveller.Services.Rest"
                name="CaseFileSpecification.xsdFormatter">
            <typeConfig>
              <constructor>
                <param name="caseFileSpecificationService" parameterType="TimeTraveller.Services.CaseFileSpecifications.ICaseFileSpecificationService, TimeTraveller.Services.CaseFileSpecifications">
                  <dependency />
                </param>
                <param name="chain" parameterType="TimeTraveller.Services.Rest.Impl.IFormatter, TimeTraveller.Services.Rest">
                  <dependency name="XmlFormatter"/>
                </param>
              </constructor>
            </typeConfig>
          </type>

          <!-- ObjectModel Commands and Formatters -->
          <type type="TimeTraveller.Services.Rest.Impl.ICommand, TimeTraveller.Services.Rest"
                mapTo="TimeTraveller.Services.Rest.Impl.Commands.ObjectModels.GetObjectModelByTimePointCommand, TimeTraveller.Services.Rest"
                name="GETObjectModelTimePointCommand"/>
          <type type="TimeTraveller.Services.Rest.Impl.ICommand, TimeTraveller.Services.Rest"
                mapTo="TimeTraveller.Services.Rest.Impl.Commands.ObjectModels.GetObjectModelByVersionCommand, TimeTraveller.Services.Rest"
                name="GETObjectModelVersionCommand"/>
          <type type="TimeTraveller.Services.Rest.Impl.ICommand, TimeTraveller.Services.Rest"
                mapTo="TimeTraveller.Services.Rest.Impl.Commands.ObjectModels.GetLatestObjectModelCommand, TimeTraveller.Services.Rest"
                name="GETObjectModelCommand"/>
          <type type="TimeTraveller.Services.Rest.Impl.ICommand, TimeTraveller.Services.Rest"
                mapTo="TimeTraveller.Services.Rest.Impl.Commands.ObjectModels.GetObjectModelsCommand, TimeTraveller.Services.Rest"
                name="GETObjectModelsCommand"/>
          <type type="TimeTraveller.Services.Rest.Impl.ICommand, TimeTraveller.Services.Rest"
                mapTo="TimeTraveller.Services.Rest.Impl.Commands.ObjectModels.StoreObjectModelCommand, TimeTraveller.Services.Rest"
                name="PUTObjectModelCommand"/>
          <type type="TimeTraveller.Services.Rest.Impl.IFormatter, TimeTraveller.Services.Rest"
                mapTo="TimeTraveller.Services.Rest.Impl.Formatters.ObjectModels.ObjectModelHistoryFormatter, TimeTraveller.Services.Rest"
                name="ObjectModelHistoryHtmlFormatter">
            <typeConfig>
              <constructor>
                <param name="objectModelService" parameterType="TimeTraveller.Services.ObjectModels.IObjectModelService, TimeTraveller.Services.ObjectModels">
                  <dependency />
                </param>
                <param name="chain" parameterType="TimeTraveller.Services.Rest.Impl.IFormatter, TimeTraveller.Services.Rest">
                  <dependency name="HistoryHtmlFormatter"/>
                </param>
              </constructor>
            </typeConfig>
          </type>
          <type type="TimeTraveller.Services.Rest.Impl.IFormatter, TimeTraveller.Services.Rest"
                mapTo="TimeTraveller.Services.Rest.Impl.Formatters.ObjectModels.ObjectModelHistoryFormatter, TimeTraveller.Services.Rest"
                name="ObjectModelHistoryXmlFormatter">
            <typeConfig>
              <constructor>
                <param name="objectModelService" parameterType="TimeTraveller.Services.ObjectModels.IObjectModelService, TimeTraveller.Services.ObjectModels">
                  <dependency />
                </param>
                <param name="chain" parameterType="TimeTraveller.Services.Rest.Impl.IFormatter, TimeTraveller.Services.Rest">
                  <dependency name="XmlFormatter"/>
                </param>
              </constructor>
            </typeConfig>
          </type>
          <type type="TimeTraveller.Services.Rest.Impl.IFormatter, TimeTraveller.Services.Rest"
                mapTo="TimeTraveller.Services.Rest.Impl.Formatters.ObjectModels.ObjectModelListFormatter, TimeTraveller.Services.Rest"
                name="ObjectModelsHtmlFormatter">
            <typeConfig>
              <constructor>
                <param name="objectModelService" parameterType="TimeTraveller.Services.ObjectModels.IObjectModelService, TimeTraveller.Services.ObjectModels">
                  <dependency />
                </param>
                <param name="chain" parameterType="TimeTraveller.Services.Rest.Impl.IFormatter, TimeTraveller.Services.Rest">
                  <dependency name="ListHtmlFormatter"/>
                </param>
              </constructor>
            </typeConfig>
          </type>
          <type type="TimeTraveller.Services.Rest.Impl.IFormatter, TimeTraveller.Services.Rest"
                mapTo="TimeTraveller.Services.Rest.Impl.Formatters.ObjectModels.ObjectModelListFormatter, TimeTraveller.Services.Rest"
                name="ObjectModelsXmlFormatter">
            <typeConfig>
              <constructor>
                <param name="objectModelService" parameterType="TimeTraveller.Services.ObjectModels.IObjectModelService, TimeTraveller.Services.ObjectModels">
                  <dependency />
                </param>
                <param name="chain" parameterType="TimeTraveller.Services.Rest.Impl.IFormatter, TimeTraveller.Services.Rest">
                  <dependency name="XmlFormatter"/>
                </param>
              </constructor>
            </typeConfig>
          </type>
          <type type="TimeTraveller.Services.Rest.Impl.IFormatter, TimeTraveller.Services.Rest"
                mapTo="TimeTraveller.Services.Rest.Impl.Formatters.ObjectModels.ObjectModelSummaryFormatter, TimeTraveller.Services.Rest"
                name="ObjectModelSummaryHtmlFormatter">
            <typeConfig>
              <constructor>
                <param name="objectModelService" parameterType="TimeTraveller.Services.ObjectModels.IObjectModelService, TimeTraveller.Services.ObjectModels">
                  <dependency />
                </param>
                <param name="chain" parameterType="TimeTraveller.Services.Rest.Impl.IFormatter, TimeTraveller.Services.Rest">
                  <dependency name="SummaryHtmlFormatter"/>
                </param>
              </constructor>
            </typeConfig>
          </type>
          <type type="TimeTraveller.Services.Rest.Impl.IFormatter, TimeTraveller.Services.Rest"
                mapTo="TimeTraveller.Services.Rest.Impl.Formatters.ObjectModels.ObjectModelSummaryFormatter, TimeTraveller.Services.Rest"
                name="ObjectModelSummaryXmlFormatter">
            <typeConfig>
              <constructor>
                <param name="objectModelService" parameterType="TimeTraveller.Services.ObjectModels.IObjectModelService, TimeTraveller.Services.ObjectModels">
                  <dependency />
                </param>
                <param name="chain" parameterType="TimeTraveller.Services.Rest.Impl.IFormatter, TimeTraveller.Services.Rest">
                  <dependency name="XmlFormatter"/>
                </param>
              </constructor>
            </typeConfig>
          </type>
          <type type="TimeTraveller.Services.Rest.Impl.IFormatter, TimeTraveller.Services.Rest"
                mapTo="TimeTraveller.Services.Rest.Impl.Formatters.ObjectModels.ObjectModelXmlFormatter, TimeTraveller.Services.Rest"
                name="ObjectModelFormatter">
            <typeConfig>
              <constructor>
                <param name="objectModelService" parameterType="TimeTraveller.Services.ObjectModels.IObjectModelService, TimeTraveller.Services.ObjectModels">
                  <dependency />
                </param>
                <param name="chain" parameterType="TimeTraveller.Services.Rest.Impl.IFormatter, TimeTraveller.Services.Rest">
                  <dependency name="XmlFormatter"/>
                </param>
              </constructor>
            </typeConfig>
          </type>
          <type type="TimeTraveller.Services.Rest.Impl.IFormatter, TimeTraveller.Services.Rest"
                mapTo="TimeTraveller.Services.Rest.Impl.Formatters.ObjectModels.ObjectModelXmlSchemaFormatter, TimeTraveller.Services.Rest"
                name="ObjectModel.xsdFormatter">
            <typeConfig>
              <constructor>
                <param name="objectModelService" parameterType="TimeTraveller.Services.ObjectModels.IObjectModelService, TimeTraveller.Services.ObjectModels">
                  <dependency />
                </param>
                <param name="chain" parameterType="TimeTraveller.Services.Rest.Impl.IFormatter, TimeTraveller.Services.Rest">
                  <dependency name="XmlFormatter"/>
                </param>
              </constructor>
            </typeConfig>
          </type>

          <!-- Repository Commands and Formatters -->
          <type type="TimeTraveller.Services.Rest.Impl.ICommand, TimeTraveller.Services.Rest"
                mapTo="TimeTraveller.Services.Rest.Impl.Commands.Repository.GetRepositoryListCommand, TimeTraveller.Services.Rest"
                name="GETRepositorysCommand"/>
          <type type="TimeTraveller.Services.Rest.Impl.ICommand, TimeTraveller.Services.Rest"
                mapTo="TimeTraveller.Services.Rest.Impl.Commands.Repository.GetRepositoryXmlSchemaCommand, TimeTraveller.Services.Rest"
                name="GETRepositoryXmlSchemaCommand"/>
          <type type="TimeTraveller.Services.Rest.Impl.ICommand, TimeTraveller.Services.Rest"
                mapTo="TimeTraveller.Services.Rest.Impl.Commands.Repository.GetRepositoryXmlSchemasCommand, TimeTraveller.Services.Rest"
                name="GETRepositoryXmlSchemasCommand"/>
          <type type="TimeTraveller.Services.Rest.Impl.IFormatter, TimeTraveller.Services.Rest"
                mapTo="TimeTraveller.Services.Rest.Impl.Formatters.ChainedXmlFormatter, TimeTraveller.Services.Rest"
                name="RepositorysHtmlFormatter">
            <typeConfig>
              <constructor>
                <param name="chain" parameterType="TimeTraveller.Services.Rest.Impl.IFormatter, TimeTraveller.Services.Rest">
                  <dependency name="ListHtmlFormatter"/>
                </param>
              </constructor>
            </typeConfig>
          </type>
          <type type="TimeTraveller.Services.Rest.Impl.IFormatter, TimeTraveller.Services.Rest"
                mapTo="TimeTraveller.Services.Rest.Impl.Formatters.XmlFormatter, TimeTraveller.Services.Rest"
                name="RepositorysXmlFormatter"/>
          <type type="TimeTraveller.Services.Rest.Impl.IFormatter, TimeTraveller.Services.Rest"
                mapTo="TimeTraveller.Services.Rest.Impl.Formatters.XmlFormatter, TimeTraveller.Services.Rest"
                name="RepositoryXmlSchema.xsdFormatter"/>
          <type type="TimeTraveller.Services.Rest.Impl.IFormatter, TimeTraveller.Services.Rest"
                mapTo="TimeTraveller.Services.Rest.Impl.Formatters.ChainedXmlFormatter, TimeTraveller.Services.Rest"
                name="RepositoryXmlSchemasHtmlFormatter">
            <typeConfig>
              <constructor>
                <param name="chain" parameterType="TimeTraveller.Services.Rest.Impl.IFormatter, TimeTraveller.Services.Rest">
                  <dependency name="ListHtmlFormatter"/>
                </param>
              </constructor>
            </typeConfig>
          </type>
          <type type="TimeTraveller.Services.Rest.Impl.IFormatter, TimeTraveller.Services.Rest"
                mapTo="TimeTraveller.Services.Rest.Impl.Formatters.XmlFormatter, TimeTraveller.Services.Rest"
                name="RepositoryXmlSchemasXmlFormatter"/>

          <!-- Representation Commands and Formatters -->
          <type type="TimeTraveller.Services.Rest.Impl.ICommand, TimeTraveller.Services.Rest"
                mapTo="TimeTraveller.Services.Rest.Impl.Commands.Representations.GetRepresentationByTimePointCommand, TimeTraveller.Services.Rest"
                name="GETRepresentationTimePointCommand"/>
          <type type="TimeTraveller.Services.Rest.Impl.ICommand, TimeTraveller.Services.Rest"
                mapTo="TimeTraveller.Services.Rest.Impl.Commands.Representations.GetRepresentationByVersionCommand, TimeTraveller.Services.Rest"
                name="GETRepresentationVersionCommand"/>
          <type type="TimeTraveller.Services.Rest.Impl.ICommand, TimeTraveller.Services.Rest"
                mapTo="TimeTraveller.Services.Rest.Impl.Commands.Representations.GetLatestRepresentationCommand, TimeTraveller.Services.Rest"
                name="GETRepresentationCommand"/>
          <type type="TimeTraveller.Services.Rest.Impl.ICommand, TimeTraveller.Services.Rest"
                mapTo="TimeTraveller.Services.Rest.Impl.Commands.Representations.GetRepresentationsCommand, TimeTraveller.Services.Rest"
                name="GETRepresentationsCommand"/>
          <type type="TimeTraveller.Services.Rest.Impl.ICommand, TimeTraveller.Services.Rest"
                mapTo="TimeTraveller.Services.Rest.Impl.Commands.Representations.StoreRepresentationCommand, TimeTraveller.Services.Rest"
                name="PUTRepresentationCommand"/>
          <type type="TimeTraveller.Services.Rest.Impl.IFormatter, TimeTraveller.Services.Rest"
                mapTo="TimeTraveller.Services.Rest.Impl.Formatters.Representations.RepresentationHistoryFormatter, TimeTraveller.Services.Rest"
                name="RepresentationHistoryHtmlFormatter">
            <typeConfig>
              <constructor>
                <param name="representationService" parameterType="TimeTraveller.Services.Representations.IRepresentationService, TimeTraveller.Services.Representations">
                  <dependency />
                </param>
                <param name="chain" parameterType="TimeTraveller.Services.Rest.Impl.IFormatter, TimeTraveller.Services.Rest">
                  <dependency name="HistoryHtmlFormatter"/>
                </param>
              </constructor>
            </typeConfig>
          </type>
          <type type="TimeTraveller.Services.Rest.Impl.IFormatter, TimeTraveller.Services.Rest"
                mapTo="TimeTraveller.Services.Rest.Impl.Formatters.Representations.RepresentationHistoryFormatter, TimeTraveller.Services.Rest"
                name="RepresentationHistoryXmlFormatter">
            <typeConfig>
              <constructor>
                <param name="representationService" parameterType="TimeTraveller.Services.Representations.IRepresentationService, TimeTraveller.Services.Representations">
                  <dependency />
                </param>
                <param name="chain" parameterType="TimeTraveller.Services.Rest.Impl.IFormatter, TimeTraveller.Services.Rest">
                  <dependency name="XmlFormatter"/>
                </param>
              </constructor>
            </typeConfig>
          </type>
          <type type="TimeTraveller.Services.Rest.Impl.IFormatter, TimeTraveller.Services.Rest"
                mapTo="TimeTraveller.Services.Rest.Impl.Formatters.Representations.RepresentationListFormatter, TimeTraveller.Services.Rest"
                name="RepresentationsHtmlFormatter">
            <typeConfig>
              <constructor>
                <param name="representationService" parameterType="TimeTraveller.Services.Representations.IRepresentationService, TimeTraveller.Services.Representations">
                  <dependency />
                </param>
                <param name="chain" parameterType="TimeTraveller.Services.Rest.Impl.IFormatter, TimeTraveller.Services.Rest">
                  <dependency name="ListHtmlFormatter"/>
                </param>
              </constructor>
            </typeConfig>
          </type>
          <type type="TimeTraveller.Services.Rest.Impl.IFormatter, TimeTraveller.Services.Rest"
                mapTo="TimeTraveller.Services.Rest.Impl.Formatters.Representations.RepresentationListFormatter, TimeTraveller.Services.Rest"
                name="RepresentationsXmlFormatter">
            <typeConfig>
              <constructor>
                <param name="representationService" parameterType="TimeTraveller.Services.Representations.IRepresentationService, TimeTraveller.Services.Representations">
                  <dependency />
                </param>
                <param name="chain" parameterType="TimeTraveller.Services.Rest.Impl.IFormatter, TimeTraveller.Services.Rest">
                  <dependency name="XmlFormatter"/>
                </param>
              </constructor>
            </typeConfig>
          </type>
          <type type="TimeTraveller.Services.Rest.Impl.IFormatter, TimeTraveller.Services.Rest"
                mapTo="TimeTraveller.Services.Rest.Impl.Formatters.Representations.RepresentationSummaryFormatter, TimeTraveller.Services.Rest"
                name="RepresentationSummaryHtmlFormatter">
            <typeConfig>
              <constructor>
                <param name="representationService" parameterType="TimeTraveller.Services.Representations.IRepresentationService, TimeTraveller.Services.Representations">
                  <dependency />
                </param>
                <param name="chain" parameterType="TimeTraveller.Services.Rest.Impl.IFormatter, TimeTraveller.Services.Rest">
                  <dependency name="SummaryHtmlFormatter"/>
                </param>
              </constructor>
            </typeConfig>
          </type>
          <type type="TimeTraveller.Services.Rest.Impl.IFormatter, TimeTraveller.Services.Rest"
                mapTo="TimeTraveller.Services.Rest.Impl.Formatters.Representations.RepresentationSummaryFormatter, TimeTraveller.Services.Rest"
                name="RepresentationSummaryXmlFormatter">
            <typeConfig>
              <constructor>
                <param name="representationService" parameterType="TimeTraveller.Services.Representations.IRepresentationService, TimeTraveller.Services.Representations">
                  <dependency />
                </param>
                <param name="chain" parameterType="TimeTraveller.Services.Rest.Impl.IFormatter, TimeTraveller.Services.Rest">
                  <dependency name="XmlFormatter"/>
                </param>
              </constructor>
            </typeConfig>
          </type>
          <type type="TimeTraveller.Services.Rest.Impl.IFormatter, TimeTraveller.Services.Rest"
                mapTo="TimeTraveller.Services.Rest.Impl.Formatters.Representations.RepresentationXmlFormatter, TimeTraveller.Services.Rest"
                name="RepresentationFormatter">
            <typeConfig>
              <constructor>
              <param name="representationService" parameterType="TimeTraveller.Services.Representations.IRepresentationService, TimeTraveller.Services.Representations">
                <dependency />
              </param>
              <param name="chain" parameterType="TimeTraveller.Services.Rest.Impl.IFormatter, TimeTraveller.Services.Rest">
                <dependency name="XmlFormatter"/>
              </param>
            </constructor>
            </typeConfig>
          </type>

          <!-- Resource Commands and Formatters -->
          <type type="TimeTraveller.Services.Rest.Impl.ICommand, TimeTraveller.Services.Rest"
                mapTo="TimeTraveller.Services.Rest.Impl.Commands.Resources.GetResourceByTimePointCommand, TimeTraveller.Services.Rest"
                name="GETResourceTimePointCommand"/>
          <type type="TimeTraveller.Services.Rest.Impl.ICommand, TimeTraveller.Services.Rest"
                mapTo="TimeTraveller.Services.Rest.Impl.Commands.Resources.GetResourceByVersionCommand, TimeTraveller.Services.Rest"
                name="GETResourceVersionCommand"/>
          <type type="TimeTraveller.Services.Rest.Impl.ICommand, TimeTraveller.Services.Rest"
                mapTo="TimeTraveller.Services.Rest.Impl.Commands.Resources.GetLatestResourceCommand, TimeTraveller.Services.Rest"
                name="GETResourceCommand"/>
          <type type="TimeTraveller.Services.Rest.Impl.ICommand, TimeTraveller.Services.Rest"
                mapTo="TimeTraveller.Services.Rest.Impl.Commands.Resources.GetResourcesCommand, TimeTraveller.Services.Rest"
                name="GETResourcesCommand"/>
          <type type="TimeTraveller.Services.Rest.Impl.ICommand, TimeTraveller.Services.Rest"
                mapTo="TimeTraveller.Services.Rest.Impl.Commands.Resources.StoreResourceCommand, TimeTraveller.Services.Rest"
                name="PUTResourceCommand"/>
          <type type="TimeTraveller.Services.Rest.Impl.IFormatter, TimeTraveller.Services.Rest"
                mapTo="TimeTraveller.Services.Rest.Impl.Formatters.Resources.ResourceHistoryFormatter, TimeTraveller.Services.Rest"
                name="ResourceHistoryHtmlFormatter">
            <typeConfig>
              <constructor>
                <param name="resourceService" parameterType="TimeTraveller.Services.Resources.IResourceService, TimeTraveller.Services.Resources">
                  <dependency />
                </param>
                <param name="chain" parameterType="TimeTraveller.Services.Rest.Impl.IFormatter, TimeTraveller.Services.Rest">
                  <dependency name="HistoryHtmlFormatter"/>
                </param>
              </constructor>
            </typeConfig>
          </type>
          <type type="TimeTraveller.Services.Rest.Impl.IFormatter, TimeTraveller.Services.Rest"
                mapTo="TimeTraveller.Services.Rest.Impl.Formatters.Resources.ResourceHistoryFormatter, TimeTraveller.Services.Rest"
                name="ResourceHistoryXmlFormatter">
            <typeConfig>
              <constructor>
                <param name="resourceService" parameterType="TimeTraveller.Services.Resources.IResourceService, TimeTraveller.Services.Resources">
                  <dependency />
                </param>
                <param name="chain" parameterType="TimeTraveller.Services.Rest.Impl.IFormatter, TimeTraveller.Services.Rest">
                  <dependency name="XmlFormatter"/>
                </param>
              </constructor>
            </typeConfig>
          </type>
          <type type="TimeTraveller.Services.Rest.Impl.IFormatter, TimeTraveller.Services.Rest"
                mapTo="TimeTraveller.Services.Rest.Impl.Formatters.Resources.ResourceListFormatter, TimeTraveller.Services.Rest"
                name="ResourcesHtmlFormatter">
            <typeConfig>
              <constructor>
                <param name="resourceService" parameterType="TimeTraveller.Services.Resources.IResourceService, TimeTraveller.Services.Resources">
                  <dependency />
                </param>
                <param name="chain" parameterType="TimeTraveller.Services.Rest.Impl.IFormatter, TimeTraveller.Services.Rest">
                  <dependency name="ListHtmlFormatter"/>
                </param>
              </constructor>
            </typeConfig>
          </type>
          <type type="TimeTraveller.Services.Rest.Impl.IFormatter, TimeTraveller.Services.Rest"
                mapTo="TimeTraveller.Services.Rest.Impl.Formatters.Resources.ResourceListFormatter, TimeTraveller.Services.Rest"
                name="ResourcesXmlFormatter">
            <typeConfig>
              <constructor>
                <param name="resourceService" parameterType="TimeTraveller.Services.Resources.IResourceService, TimeTraveller.Services.Resources">
                  <dependency />
                </param>
                <param name="chain" parameterType="TimeTraveller.Services.Rest.Impl.IFormatter, TimeTraveller.Services.Rest">
                  <dependency name="XmlFormatter"/>
                </param>
              </constructor>
            </typeConfig>
          </type>
          <type type="TimeTraveller.Services.Rest.Impl.IFormatter, TimeTraveller.Services.Rest"
                mapTo="TimeTraveller.Services.Rest.Impl.Formatters.Resources.ResourceSummaryFormatter, TimeTraveller.Services.Rest"
                name="ResourceSummaryHtmlFormatter">
            <typeConfig>
              <constructor>
                <param name="resourceService" parameterType="TimeTraveller.Services.Resources.IResourceService, TimeTraveller.Services.Resources">
                  <dependency />
                </param>
                <param name="chain" parameterType="TimeTraveller.Services.Rest.Impl.IFormatter, TimeTraveller.Services.Rest">
                  <dependency name="SummaryHtmlFormatter"/>
                </param>
              </constructor>
            </typeConfig>
          </type>
          <type type="TimeTraveller.Services.Rest.Impl.IFormatter, TimeTraveller.Services.Rest"
                mapTo="TimeTraveller.Services.Rest.Impl.Formatters.Resources.ResourceSummaryFormatter, TimeTraveller.Services.Rest"
                name="ResourceSummaryXmlFormatter">
            <typeConfig>
              <constructor>
                <param name="resourceService" parameterType="TimeTraveller.Services.Resources.IResourceService, TimeTraveller.Services.Resources">
                  <dependency />
                </param>
                <param name="chain" parameterType="TimeTraveller.Services.Rest.Impl.IFormatter, TimeTraveller.Services.Rest">
                  <dependency name="XmlFormatter"/>
                </param>
              </constructor>
            </typeConfig>
          </type>
          <type type="TimeTraveller.Services.Rest.Impl.IFormatter, TimeTraveller.Services.Rest"
                mapTo="TimeTraveller.Services.Rest.Impl.Formatters.Resources.ResourceFormatter, TimeTraveller.Services.Rest"
                name="ResourceFormatter"/>

          <!-- Rule Commands and Formatters -->
          <type type="TimeTraveller.Services.Rest.Impl.ICommand, TimeTraveller.Services.Rest"
                mapTo="TimeTraveller.Services.Rest.Impl.Commands.Rules.GetRuleByTimePointCommand, TimeTraveller.Services.Rest"
                name="GETRuleTimePointCommand"/>
          <type type="TimeTraveller.Services.Rest.Impl.ICommand, TimeTraveller.Services.Rest"
                mapTo="TimeTraveller.Services.Rest.Impl.Commands.Rules.GetRuleByVersionCommand, TimeTraveller.Services.Rest"
                name="GETRuleVersionCommand"/>
          <type type="TimeTraveller.Services.Rest.Impl.ICommand, TimeTraveller.Services.Rest"
                mapTo="TimeTraveller.Services.Rest.Impl.Commands.Rules.GetLatestRuleCommand, TimeTraveller.Services.Rest"
                name="GETRuleCommand"/>
          <type type="TimeTraveller.Services.Rest.Impl.ICommand, TimeTraveller.Services.Rest"
                mapTo="TimeTraveller.Services.Rest.Impl.Commands.Rules.GetRulesCommand, TimeTraveller.Services.Rest"
                name="GETRulesCommand"/>
          <type type="TimeTraveller.Services.Rest.Impl.ICommand, TimeTraveller.Services.Rest"
                mapTo="TimeTraveller.Services.Rest.Impl.Commands.Rules.ExecuteRuleByTimePointCommand, TimeTraveller.Services.Rest"
                name="POSTRuleTimePointCommand"/>
          <type type="TimeTraveller.Services.Rest.Impl.ICommand, TimeTraveller.Services.Rest"
                mapTo="TimeTraveller.Services.Rest.Impl.Commands.Rules.ExecuteRuleByVersionCommand, TimeTraveller.Services.Rest"
                name="POSTRuleVersionCommand"/>
          <type type="TimeTraveller.Services.Rest.Impl.ICommand, TimeTraveller.Services.Rest"
                mapTo="TimeTraveller.Services.Rest.Impl.Commands.Rules.ExecuteLatestRuleCommand, TimeTraveller.Services.Rest"
                name="POSTRuleCommand"/>
          <type type="TimeTraveller.Services.Rest.Impl.ICommand, TimeTraveller.Services.Rest"
                mapTo="TimeTraveller.Services.Rest.Impl.Commands.Rules.StoreRuleCommand, TimeTraveller.Services.Rest"
                name="PUTRuleCommand"/>

          <!-- *************************************************************************************************************** -->

          <type type="TimeTraveller.Services.Rest.Impl.IFormatter, TimeTraveller.Services.Rest"
                mapTo="TimeTraveller.Services.Rest.Impl.Formatters.Rules.RuleHistoryFormatter, TimeTraveller.Services.Rest"
                name="RuleHistoryHtmlFormatter">
            <typeConfig>
              <constructor>
                <param name="ruleService" parameterType="TimeTraveller.Services.Rules.IRuleService, TimeTraveller.Services.Rules">
                  <dependency />
                </param>
                <param name="chain" parameterType="TimeTraveller.Services.Rest.Impl.IFormatter, TimeTraveller.Services.Rest">
                  <dependency name="HistoryHtmlFormatter"/>
                </param>
              </constructor>
            </typeConfig>
          </type>
          <type type="TimeTraveller.Services.Rest.Impl.IFormatter, TimeTraveller.Services.Rest"
                mapTo="TimeTraveller.Services.Rest.Impl.Formatters.Rules.RuleHistoryFormatter, TimeTraveller.Services.Rest"
                name="RuleHistoryXmlFormatter">
            <typeConfig>
              <constructor>
                <param name="ruleService" parameterType="TimeTraveller.Services.Rules.IRuleService, TimeTraveller.Services.Rules">
                  <dependency />
                </param>
                <param name="chain" parameterType="TimeTraveller.Services.Rest.Impl.IFormatter, TimeTraveller.Services.Rest">
                  <dependency name="XmlFormatter"/>
                </param>
              </constructor>
            </typeConfig>
          </type>
          <type type="TimeTraveller.Services.Rest.Impl.IFormatter, TimeTraveller.Services.Rest"
                mapTo="TimeTraveller.Services.Rest.Impl.Formatters.Rules.RuleListFormatter, TimeTraveller.Services.Rest"
                name="RulesHtmlFormatter">
            <typeConfig>
              <constructor>
                <param name="ruleService" parameterType="TimeTraveller.Services.Rules.IRuleService, TimeTraveller.Services.Rules">
                  <dependency />
                </param>
                <param name="chain" parameterType="TimeTraveller.Services.Rest.Impl.IFormatter, TimeTraveller.Services.Rest">
                  <dependency name="ListHtmlFormatter"/>
                </param>
              </constructor>
            </typeConfig>
          </type>
          <type type="TimeTraveller.Services.Rest.Impl.IFormatter, TimeTraveller.Services.Rest"
                mapTo="TimeTraveller.Services.Rest.Impl.Formatters.Rules.RuleListFormatter, TimeTraveller.Services.Rest"
                name="RulesXmlFormatter">
            <typeConfig>
              <constructor>
                <param name="ruleService" parameterType="TimeTraveller.Services.Rules.IRuleService, TimeTraveller.Services.Rules">
                  <dependency />
                </param>
                <param name="chain" parameterType="TimeTraveller.Services.Rest.Impl.IFormatter, TimeTraveller.Services.Rest">
                  <dependency name="XmlFormatter"/>
                </param>
              </constructor>
            </typeConfig>
          </type>
          <type type="TimeTraveller.Services.Rest.Impl.IFormatter, TimeTraveller.Services.Rest"
                mapTo="TimeTraveller.Services.Rest.Impl.Formatters.Rules.RuleSummaryFormatter, TimeTraveller.Services.Rest"
                name="RuleSummaryHtmlFormatter">
            <typeConfig>
              <constructor>
                <param name="ruleService" parameterType="TimeTraveller.Services.Rules.IRuleService, TimeTraveller.Services.Rules">
                  <dependency />
                </param>
                <param name="chain" parameterType="TimeTraveller.Services.Rest.Impl.IFormatter, TimeTraveller.Services.Rest">
                  <dependency name="SummaryHtmlFormatter"/>
                </param>
              </constructor>
            </typeConfig>
          </type>
          <type type="TimeTraveller.Services.Rest.Impl.IFormatter, TimeTraveller.Services.Rest"
                mapTo="TimeTraveller.Services.Rest.Impl.Formatters.Rules.RuleSummaryFormatter, TimeTraveller.Services.Rest"
                name="RuleSummaryXmlFormatter">
            <typeConfig>
              <constructor>
                <param name="ruleService" parameterType="TimeTraveller.Services.Rules.IRuleService, TimeTraveller.Services.Rules">
                  <dependency />
                </param>
                <param name="chain" parameterType="TimeTraveller.Services.Rest.Impl.IFormatter, TimeTraveller.Services.Rest">
                  <dependency name="XmlFormatter"/>
                </param>
              </constructor>
            </typeConfig>
          </type>
          <type type="TimeTraveller.Services.Rest.Impl.IFormatter, TimeTraveller.Services.Rest"
                mapTo="TimeTraveller.Services.Rest.Impl.Formatters.Rules.RuleXmlFormatter, TimeTraveller.Services.Rest"
                name="RuleFormatter">
            <typeConfig>
              <constructor>
                <param name="ruleService" parameterType="TimeTraveller.Services.Rules.IRuleService, TimeTraveller.Services.Rules">
                  <dependency/>
                </param>
                <param name="chain" parameterType="TimeTraveller.Services.Rest.Impl.IFormatter, TimeTraveller.Services.Rest">
                  <dependency name="XmlFormatter"/>
                </param>
                <param name="caseFileFormatter" parameterType="TimeTraveller.Services.Rest.Impl.IFormatter, TimeTraveller.Services.Rest">
                  <dependency name="CaseFileFormatter"/>
                </param>
              </constructor>
            </typeConfig>
          </type>

          <!-- General services -->
          <type type="TimeTraveller.General.Logging.ILogger, TimeTraveller.General.Logging"
                mapTo="TimeTraveller.General.Logging.Log4Net.Log4NetLogger, TimeTraveller.General.Logging">
          </type>
          <type type="TimeTraveller.General.Unity.IUnity, TimeTraveller.General.Unity" 
                mapTo="TimeTraveller.General.Unity.Impl.UnityContainerWrapper, TimeTraveller.General.Unity.Impl">
            <lifetime type="singleton" />
          </type>
        </types>
      </container>
    </containers>
  </unity>

  <system.serviceModel>
    <bindings>
      <customBinding>
        <binding name="customWebHttpBinding">
          <webMessageEncoding webContentTypeMapperType="TimeTraveller.Services.Rest.Extensions.AcceptAllWebContentTypeMapper, TimeTraveller.Services.Rest.Extensions"/>
          <httpTransport manualAddressing="true"/>
        </binding>
      </customBinding>
    </bindings>
    <services>
      <service name="TimeTraveller.Services.Console.RestServiceWrapper" behaviorConfiguration="TimeTraveller.RestService.Behavior">
        <host>
          <baseAddresses>
            <add baseAddress="http://localhost:8080"/>
          </baseAddresses>
        </host>
        <endpoint address="its"
                  binding="customBinding"
                  bindingConfiguration="customWebHttpBinding"
                  behaviorConfiguration="TimeTraveller.RestService.EndpointBehavior"
                  contract="TimeTraveller.Services.Rest.IRestService"/>
      </service>
    </services>
    <extensions>
      <behaviorExtensions>
        <add name ="customWebHttp" type="TimeTraveller.Services.Rest.Extensions.CustomizedErrorHandlingWebHttpBehaviorExtention, TimeTraveller.Services.Rest.Extensions, Version=1.0.0.0, Culture=neutral, PublicKeyToken=4792803e79f11eb8"/>
      </behaviorExtensions>
    </extensions>
    <behaviors>
      <endpointBehaviors>
        <behavior name="TimeTraveller.RestService.EndpointBehavior">
          <customWebHttp/>
        </behavior>
      </endpointBehaviors>
      <serviceBehaviors>
        <behavior name="TimeTraveller.RestService.Behavior">
          <serviceMetadata httpGetEnabled="true"/>
          <serviceDebug includeExceptionDetailInFaults="true"/>
        </behavior>
      </serviceBehaviors>
    </behaviors>
  </system.serviceModel>

  <system.diagnostics>
    <sources>
      <source name="System.ServiceModel"
      switchValue="Verbose, ActivityTracing">
        <listeners>
          <add name="sdt"
               type="System.Diagnostics.XmlWriterTraceListener"
               initializeData= "TimeTraveller.Services.Console.Wcf-log.xml" />
        </listeners>
      </source>
    </sources>
  </system.diagnostics>

</configuration>
